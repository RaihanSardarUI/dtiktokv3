---
// AdBanner.astro - Simple advertisement component
export interface Props {
  position?: 'top' | 'middle' | 'bottom' | 'sidebar';
  className?: string;
}

const { position = 'middle', className = '' } = Astro.props;

// Generate unique ID for this ad instance
const adId = `ad-${Math.random().toString(36).substr(2, 9)}`;
---

<div class={`ad-banner ad-${position} ${className}`}>
  <div class="ad-container">
    <!-- Ad Label for transparency -->
    <div class="ad-label">Advertisement</div>
    
    <!-- Simple Ad Content -->
    <div id={adId} class="ad-content">
      <!-- Ad will be injected here -->
    </div>
  </div>
</div>

<style>
  .ad-banner {
    @apply w-full flex justify-center my-6;
  }
  
  .ad-container {
    @apply flex flex-col items-center space-y-2 p-4 bg-gray-800/50 rounded-lg border border-gray-700;
    max-width: 320px;
  }
  
  .ad-label {
    @apply text-xs text-gray-400 uppercase tracking-wider font-medium;
  }
  
  .ad-content {
    @apply flex justify-center items-center;
    min-height: 250px;
    width: 300px;
  }
  
  /* Position-specific styles */
  .ad-top {
    @apply mt-4 mb-8;
  }
  
  .ad-middle {
    @apply my-8;
  }
  
  .ad-bottom {
    @apply mt-8 mb-4;
  }
  
  .ad-sidebar {
    @apply sticky top-24;
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .ad-container {
      max-width: 280px;
    }
    
    .ad-content {
      width: 260px;
      min-height: 200px;
    }
  }
</style>

<script define:vars={{ adId }}>
  // Simple ad loading - no complex optimizations
  (function() {
    'use strict';
    
    const adContainer = document.getElementById(adId);
    if (!adContainer) return;
    
    // Set your ad configuration
    window.atOptions = {
      'key': '5db4e115c9cae4168f6efca75fe17bd9',
      'format': 'iframe',
      'height': window.innerWidth <= 768 ? 200 : 250,
      'width': window.innerWidth <= 768 ? 260 : 300,
      'params': {}
    };
    
    // Load your ad script
    const script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = '//chillimagepublisher.com/5db4e115c9cae4168f6efca75fe17bd9/invoke.js';
    
    // Append script to the ad container
    adContainer.appendChild(script);
    
  })();
</script> 
